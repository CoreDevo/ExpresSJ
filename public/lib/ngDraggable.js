angular.module("ngDraggable",[]).service("ngDraggable",[function(){var n=this;n.inputEvent=function(n){return angular.isDefined(n.touches)?n.touches[0]:angular.isDefined(n.originalEvent)&&angular.isDefined(n.originalEvent.touches)?n.originalEvent.touches[0]:n}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(n,t,e,a,o){return{restrict:"A",link:function(r,i,c){r.value=c.ngDrag;var l,u,s,g,f,d,m,v,p=!1,$="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,D="touchstart mousedown",h="touchmove mousemove",b="touchend mouseup",w=r.$id,y=null,x=null,S=!1,E=null,C=t(c.ngDragStart)||null,A=t(c.ngDragStop)||null,T=t(c.ngDragSuccess)||null,k=angular.isDefined(c.allowTransform)?r.$eval(c.allowTransform):!0,X=t(c.ngDragData),Y=angular.noop,O=function(){if(i.attr("draggable","false"),i[0].querySelectorAll)var n=angular.element(i[0].querySelectorAll("[ng-drag-handle]"));else var n=i.find("[ng-drag-handle]");n.length&&(v=n),z(!0)},z=function(n){n&&(r.$on("$destroy",q),r.$watch(c.ngDrag,H),r.$watch(c.ngCenterAnchor,L),v?v.on(D,R):i.on(D,R),$||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},q=function(){z(!1)},H=function(n){S=n},L=function(n){angular.isDefined(n)&&(p=n||"true")},M=function(n){return angular.isDefined(angular.element(n.target).attr("ng-cancel-drag"))},R=function(n){S&&(M(n)||"mousedown"==n.type&&0!=n.button||($?(_(),E=setTimeout(function(){_(),B(n)},100),e.on(h,_),e.on(b,_)):B(n)))},_=function(){clearTimeout(E),e.off(h,_),e.off(b,_)},B=function(t){S&&(t.preventDefault(),l=i[0].getBoundingClientRect(),x=k?l:{left:document.body.scrollLeft,top:document.body.scrollTop},i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,u=o.inputEvent(t).pageX,s=o.inputEvent(t).pageY,d=u-l.left,m=s-l.top,p?(g=u-i.centerX-a.pageXOffset,f=s-i.centerY-a.pageYOffset):(g=u-d-a.pageXOffset,f=s-m-a.pageYOffset),e.on(h,F),e.on(b,P),Y=n.$on("draggable:_triggerHandlerMove",function(n,t){F(t)}))},F=function(t){S&&(t.preventDefault(),i.hasClass("dragging")||(y=X(r),i.addClass("dragging"),n.$broadcast("draggable:start",{x:u,y:s,tx:g,ty:f,event:t,element:i,data:y}),C&&r.$apply(function(){C(r,{$data:y,$event:t})})),u=o.inputEvent(t).pageX,s=o.inputEvent(t).pageY,p?(g=u-i.centerX-x.left,f=s-i.centerY-x.top):(g=u-d-x.left,f=s-m-x.top),N(g,f),n.$broadcast("draggable:move",{x:u,y:s,tx:g,ty:f,event:t,element:i,data:y,uid:w,dragOffset:x}))},P=function(t){S&&(t.preventDefault(),n.$broadcast("draggable:end",{x:u,y:s,tx:g,ty:f,event:t,element:i,data:y,callback:W,uid:w}),i.removeClass("dragging"),i.parent().find(".drag-enter").removeClass("drag-enter"),V(),e.off(h,F),e.off(b,P),A&&r.$apply(function(){A(r,{$data:y,$event:t})}),Y())},W=function(n){T&&r.$apply(function(){T(r,{$data:y,$event:n})})},V=function(){k?i.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):i.css({position:"",top:"",left:""})},N=function(n,t){k?i.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+t+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+t+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+n+", "+t+")"}):i.css({left:n+"px",top:t+"px",position:"fixed"})};O()}}}]).directive("ngDrop",["$parse","$timeout","$window","$document","ngDraggable",function(n,t,e,a){return{restrict:"A",link:function(e,o,r){e.value=r.ngDrop,e.isTouching=!1;var i=null,c=e.$id,l=!1,u=n(r.ngDropSuccess),s=n(r.ngDragStart),g=n(r.ngDragStop),f=n(r.ngDragMove),d=function(){m(!0)},m=function(n){n&&(e.$watch(r.ngDrop,p),e.$on("$destroy",v),e.$on("draggable:start",$),e.$on("draggable:move",D),e.$on("draggable:end",h))},v=function(){m(!1)},p=function(n){l=n},$=function(n,a){l&&(b(a.x,a.y,a.element),r.ngDragStart&&t(function(){s(e,{$data:a.data,$event:a})}))},D=function(n,a){l&&(b(a.x,a.y,a.element),r.ngDragMove&&t(function(){f(e,{$data:a.data,$event:a})}))},h=function(n,a){return l&&c!==a.uid?(b(a.x,a.y,a.element)&&(a.callback&&a.callback(a),r.ngDropSuccess&&t(function(){u(e,{$data:a.data,$event:a,$target:e.$eval(e.value)})})),r.ngDragStop&&t(function(){g(e,{$data:a.data,$event:a})}),void w(!1,a.element)):void w(!1,a.element)},b=function(n,t,a){var r=y(n,t);return e.isTouching=r,r&&(i=o),w(r,a),r},w=function(n,t){n?(o.addClass("drag-enter"),t.addClass("drag-over")):i==o&&(i=null,o.removeClass("drag-enter"),t.removeClass("drag-over"))},y=function(n,t){var e=o[0].getBoundingClientRect();return n-=a[0].body.scrollLeft+a[0].documentElement.scrollLeft,t-=a[0].body.scrollTop+a[0].documentElement.scrollTop,n>=e.left&&n<=e.right&&t<=e.bottom&&t>=e.top};d()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(){return{restrict:"A",link:function(n,t){var e,a=!0;n.clonedData={};var o=function(){e=t.find("img"),t.attr("draggable","false"),e.attr("draggable","false"),s(),r(!0)},r=function(t){t&&(n.$on("draggable:start",c),n.$on("draggable:move",l),n.$on("draggable:end",u),i())},i=function(){e.off("mousedown touchstart touchmove touchend touchcancel",f),e.on("mousedown touchstart touchmove touchend touchcancel",f)},c=function(e,o){a=!0,angular.isDefined(o.data.allowClone)&&(a=o.data.allowClone),a&&(n.$apply(function(){n.clonedData=o.data}),t.css("width",o.element[0].offsetWidth),t.css("height",o.element[0].offsetHeight),g(o.tx,o.ty))},l=function(n,t){a&&(_tx=t.tx+t.dragOffset.left,_ty=t.ty+t.dragOffset.top,g(_tx,_ty))},u=function(){a&&s()},s=function(){t.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},g=function(n,e){t.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+e+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+e+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+n+", "+e+")"})},f=function(n){var t=n;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};o()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(){return{restrict:"A",link:function(n,t){var e=function(){t.attr("draggable","false"),a(!0)},a=function(n){n&&t.on("mousedown touchstart touchmove touchend touchcancel",o)},o=function(n){var t=n.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};e()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(n,t){t.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(n,t,e,a,o){return{restrict:"A",link:function(t,e,r){var i=null,c={verticalScroll:r.verticalScroll||!0,horizontalScroll:r.horizontalScroll||!0,activationDistance:r.activationDistance||75,scrollDistance:r.scrollDistance||15},l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),u=!1,s=function(){function t(n){var e=Array.prototype.slice.call(arguments);u&&l(function(){o.$apply(function(){n.apply(null,e),t(n)})})}u=!0,t(function(){if(i){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight,window.innerHeight||0),l=0,u=0;if(c.horizontalScroll&&(i.clientX<c.activationDistance?l=-c.scrollDistance:i.clientX>t-c.activationDistance&&(l=c.scrollDistance)),c.verticalScroll&&(i.clientY<c.activationDistance?u=-c.scrollDistance:i.clientY>r-c.activationDistance&&(u=c.scrollDistance)),0!==l||0!==u){var s=n.pageXOffset||a[0].documentElement.scrollLeft,g=n.pageYOffset||a[0].documentElement.scrollTop,f=e.css("transform");e.css("transform","initial"),n.scrollBy(l,u);var d=(n.pageXOffset||a[0].documentElement.scrollLeft)-s,m=(n.pageYOffset||a[0].documentElement.scrollTop)-g;e.css("transform",f),i.pageX+=d,i.pageY+=m,o.$emit("draggable:_triggerHandlerMove",i)}}})},g=function(){u=!1};t.$on("draggable:start",function(n,t){t.element[0]===e[0]&&(u||s())}),t.$on("draggable:end",function(n,t){t.element[0]===e[0]&&u&&g()}),t.$on("draggable:move",function(n,t){t.element[0]===e[0]&&(i=t.event)})}}}]);